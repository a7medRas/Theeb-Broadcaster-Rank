<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ملف المذيع</title>
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      direction: rtl;
      background-color: #fdfbf8;
      padding: 20px;
    }
    .profile-container {
      max-width: 800px;
      margin: auto;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      padding: 20px;
    }
    .name-section {
      text-align: center;
    }
    .status {
      margin-top: 10px;
      font-weight: bold;
      color: green;
    }
    .badges {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 15px;
    }
    .badge {
      width: 60px;
    }
    .progress {
      margin: 15px 0;
    }
    .progress label {
      font-weight: bold;
    }
    .progress-bar {
      background-color: #eee;
      border-radius: 10px;
      overflow: hidden;
      height: 20px;
      margin-top: 5px;
    }
    .progress-bar-fill {
      height: 100%;
      background-color: #76b900;
      text-align: center;
      color: white;
      font-size: 12px;
      line-height: 20px;
    }
    .promotion-section {
      text-align: center;
      margin-top: 20px;
    }
    .promotion-btn {
      display: inline-block;
      padding: 10px 20px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .history, .notifications {
      margin-top: 30px;
      padding: 15px;
      background-color: #f9f9f9;
      border-radius: 8px;
    }
    .history h3, .notifications h3 {
      margin-bottom: 10px;
    }
    .history ul, .notifications ul {
      list-style: none;
      padding-right: 20px;
    }
    .history li, .notifications li {
      padding: 5px 0;
      border-bottom: 1px solid #ddd;
    }
  </style>
</head>
<body>
  <div class="profile-container">
    <div class="name-section">
      <h1>اسم المذيع</h1>
      <p>ID: 123456789</p>
      <p class="status">🔄 جاري التحقق من النشاط...</p>
      <div class="badges">
        <img src="https://imgg.io/images/2025/07/12/8b2e43ea5d5650a43fddd74afd039fa9.png" alt="رتبة" class="badge">
        <img src="https://imgg.io/images/2025/07/12/25ab266bd99ef1cd9d1615f825f7361d.png" alt="دعوات" class="badge">
        <img src="https://imgg.io/images/2025/07/12/a58816f9c98e947dfcc0275f158eb9bc.jpg" alt="شعبية" class="badge">
      </div>
    </div>

    <div class="progress">
      <label>ساعات البث (31 ساعة)</label>
      <div class="progress-bar"><div class="progress-bar-fill" style="width: 100%">31/31</div></div>
    </div>
    <div class="progress">
      <label>الفاصوليا</label>
      <div class="progress-bar"><div class="progress-bar-fill" style="width: 45%">45,000 / 100,000</div></div>
    </div>
    <div class="progress">
      <label>الدعوات</label>
      <div class="progress-bar"><div class="progress-bar-fill" style="width: 60%">6 / 10</div></div>
    </div>
    <div class="progress">
      <label>التقييم</label>
      <div class="progress-bar"><div class="progress-bar-fill" style="width: 80%">4 / 5</div></div>
    </div>

    <div class="promotion-section">
      <p>المزايا: 4% + قسيمة شحن 5$</p>
      <button class="promotion-btn">ترقية المذيع</button>
    </div>

    <div class="history">
      <h3>سجل الترقيات</h3>
      <ul>
        <li>📅 تمت الترقية إلى محترف – 12 يوليو 2025</li>
        <li>📅 تمت الترقية إلى VIP – 5 يونيو 2025</li>
      </ul>
    </div>

    <div class="notifications">
      <h3>تنبيهات</h3>
      <ul>
        <li>🎉 اقتربت من الترقية إلى SVIP!</li>
        <li>✅ أتممت 31 ساعة بث</li>
      </ul>
    </div>
  </div>

  <!-- 🔁 ربط الحالة تلقائيًا من Google Sheet -->
  <script>
    const uid = "123456789"; // ← عدله حسب UID الفعلي
    const endpoint = "https://script.google.com/macros/s/AKfycbxDEG_HqpC0cZdFe7AXu2tSpB3DJv8nEOkdfFnF04ml2SUhkkSaY7LaP5THjzy6NlPdHg/exec";

    fetch(`${endpoint}?uid=${uid}`)
      .then(res => res.json())
      .then(data => {
        const lastBroadcast = new Date(data.last_broadcast);
        const now = new Date();
        const diffHours = (now - lastBroadcast) / (1000 * 60 * 60);
        const statusEl = document.querySelector(".status");

        if (diffHours <= 48) {
          statusEl.innerText = "🟢 مذيع نشط";
          statusEl.style.color = "green";
        } else {
          statusEl.innerText = "🔴 غير نشط";
          statusEl.style.color = "red";
        }
      })
      .catch(() => {
        document.querySelector(".status").innerText = "❔ غير معروف";
      });
  </script>
</body>
</html>
